{
  "title": "ExpressとReactでWEBアプリケーション構築してみよう",
  "tags": "React",
  "img": "https://s3-ap-northeast-1.amazonaws.com/i.schoo/images/class/600x260/3628.jpg",
  "created_at": "2020-07-29 12:53:00",
  "bodyContent": "# Express と React で WEB アプリケーション構築してみよう\r\n\r\n## 最終的なディレクトリ構成\r\n\r\n```\r\n./app\r\n|----client/\r\n     |----config\r\n          |----webpack.config.js\r\n          |----webpack.config.dev.js\r\n     |----dist(distribution)/\r\n     |----src/\r\n          |----index.html\r\n          |----index.jsx\r\n|----server/\r\n     |----server.js\r\n|----package.json\r\n|----tsconfig,json\r\n```\r\n\r\n## フロント側を作っていく(client)\r\n\r\n何はともあれ **npm init**\r\n\r\n```shell\r\nnpm init -y\r\n```\r\n\r\nその後必要なパッケージをインストールしていく\r\n\r\n#### ▶ フロント側では webpack を使っていくのでそれ関係\r\n\r\n```shell\r\nnpm i -D webpack webpack-cli html-webpack-plugin webpack-dev-server\r\n```\r\n\r\n|    パッケージ名     | 説明                                                                                 |\r\n| :-----------------: | :----------------------------------------------------------------------------------- |\r\n|       webpack       | js,css,画像ファイルなどをトランスパイルして 1 つの js ファイルにバンドルできるツール |\r\n|     webpack-cli     | webpack を実行するための cli                                                         |\r\n| html-webpack-plugin | バンドルされた js ファイルを埋め込んだ html を出力できる                             |\r\n| webpack-dev-server  | webpack で開発する時に使用できる web サーバー(HMR,Proxy が使える)                    |\r\n\r\n#### ▶ トランスパイル時に使用する babel 周り\r\n\r\n```shell\r\nnpm i -D babel-core babel-loader@7 babel-preset-env babel-preset-react\r\n```\r\n\r\n#### ▶ React\r\n\r\n```shell\r\nnpm i -S react react-dom\r\n```\r\n\r\n### webpack の設定ファイルを書く(webpack.config.js)\r\n\r\n```javascript\r\nconst HtmlWebPackPlugin = require('html-webpack-plugin')\r\nconst path = require('path')\r\n\r\nconst htmlWebpackPlugin = new HtmlWebPackPlugin({\r\n  template: './client/src/index.html', //後で作っていきます\r\n  filename: './index.html'\r\n})\r\n\r\nmodule.exports = {\r\n  entry: {\r\n    index: './client/src/index.jsx' // 後で作っていきます\r\n  },\r\n  output: {\r\n    path: path.resolve('client/dist'),\r\n    filename: '[name].bundle.js' //[name]がentry名に置き換えられるのでこの場合index.bundle.jsになります\r\n  },\r\n  module: {\r\n    rules: [\r\n      {\r\n        test: /\\.(js|jsx)$/,\r\n        exclude: /node_modules/,\r\n        use: {\r\n          loader: 'babel-loader' //先ほどインストールしたbabel-loader\r\n        }\r\n      }\r\n    ]\r\n  },\r\n  resolve: {\r\n    extensions: ['*', '.js', '.jsx'] //拡張子まで書かなくてもファイルをimportすることができるようになる\r\n  },\r\n  plugins: [htmlWebpackPlugin]\r\n}\r\n```\r\n\r\nメモ\r\n\r\n> webpack.config.js は cli によって実行された場所をルートとしてみることに注意\r\n> \\_\\_dirname はそのファイルがおかれているディレクトリまでのパスを取得できる\r\n> path.resolve は引数で指定したファイルの絶対パスを返す\r\n\r\n### React を書いていく\r\n\r\n#### ▶ まずベースとなる html\r\n\r\n```jsx\r\n<!DOCTYPE html>\r\n<html lang=\"ja\">\r\n  <head>\r\n    <meta charset=\"UTF-8\" />\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n    <title>tanabata-blog</title>\r\n  </head>\r\n  <body>\r\n    <section id=\"app\"></section>\r\n  </body>\r\n</html>\r\n```\r\n\r\n#### ▶ jsx ファイル\r\n\r\n```javascript\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nconst Index = () => {\r\n  return (\r\n    <div>\r\n      <div>Hello,world.</div>\r\n    </div>\r\n  )\r\n}\r\nReactDOM.render(<Index />, document.getElementById('app'))\r\n```\r\n\r\n### package.json を編集して実行準備\r\n\r\nscripts に webpack コマンドを設定\r\n\r\nbabel の preset を設定\r\n\r\n```json\r\n----略\r\n\"scripts\": {\r\n    \"client\": \"webpack-dev-server --config ./client/config/webpack.config.js --open --mode development\",\r\n    \"build\": \"webpack --config ./client/config/webpack.config.js --mode development\"\r\n },\r\n \"babel\": {\r\n    \"presets\": [\r\n      \"babel-preset-env\",\r\n      \"babel-preset-react\"\r\n    ]\r\n  },\r\n----略\r\n```\r\n\r\n### 実行してみる\r\n\r\nlocalhost:8080 で dev サーバーが立ち上がる\r\n\r\n```shell\r\nnpm run client\r\n```\r\n\r\n./client/dist/にバンドルされ js ファイルとそれを読み込む html が出力される\r\n\r\n```shell\r\nnpm run build\r\n```",
  "bodyHtml": "<h1>Express と React で WEB アプリケーション構築してみよう</h1>\n<h2>最終的なディレクトリ構成</h2>\n<pre><code>./app\n|----client/\n     |----config\n          |----webpack.config.js\n          |----webpack.config.dev.js\n     |----dist(distribution)/\n     |----src/\n          |----index.html\n          |----index.jsx\n|----server/\n     |----server.js\n|----package.json\n|----tsconfig,json\n</code></pre>\n<h2>フロント側を作っていく(client)</h2>\n<p>何はともあれ <strong>npm init</strong></p>\n<pre><code class=\"hljs\">npm init -y</code></pre><p>その後必要なパッケージをインストールしていく</p>\n<h4>▶ フロント側では webpack を使っていくのでそれ関係</h4>\n<pre><code class=\"hljs\">npm i -D webpack webpack-cli html-webpack-plugin webpack-dev-server</code></pre><table>\n<thead>\n<tr>\n<th style=\"text-align:center\">パッケージ名</th>\n<th style=\"text-align:left\">説明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">webpack</td>\n<td style=\"text-align:left\">js,css,画像ファイルなどをトランスパイルして 1 つの js ファイルにバンドルできるツール</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">webpack-cli</td>\n<td style=\"text-align:left\">webpack を実行するための cli</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">html-webpack-plugin</td>\n<td style=\"text-align:left\">バンドルされた js ファイルを埋め込んだ html を出力できる</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">webpack-dev-server</td>\n<td style=\"text-align:left\">webpack で開発する時に使用できる web サーバー(HMR,Proxy が使える)</td>\n</tr>\n</tbody>\n</table>\n<h4>▶ トランスパイル時に使用する babel 周り</h4>\n<pre><code class=\"hljs\">npm i -D babel-core babel-loader@7 babel-preset-env babel-preset-react</code></pre><h4>▶ React</h4>\n<pre><code class=\"hljs\">npm i -S react react-dom</code></pre><h3>webpack の設定ファイルを書く(webpack.config.js)</h3>\n<pre><code class=\"hljs\"><span class=\"hljs-keyword\">const</span> HtmlWebPackPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'html-webpack-plugin'</span>)\n<span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)\n\n<span class=\"hljs-keyword\">const</span> htmlWebpackPlugin = <span class=\"hljs-keyword\">new</span> HtmlWebPackPlugin({\n  <span class=\"hljs-attr\">template</span>: <span class=\"hljs-string\">'./client/src/index.html'</span>, <span class=\"hljs-comment\">//後で作っていきます</span>\n  <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-string\">'./index.html'</span>\n})\n\n<span class=\"hljs-built_in\">module</span>.exports = {\n  <span class=\"hljs-attr\">entry</span>: {\n    <span class=\"hljs-attr\">index</span>: <span class=\"hljs-string\">'./client/src/index.jsx'</span> <span class=\"hljs-comment\">// 後で作っていきます</span>\n  },\n  <span class=\"hljs-attr\">output</span>: {\n    <span class=\"hljs-attr\">path</span>: path.resolve(<span class=\"hljs-string\">'client/dist'</span>),\n    <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-string\">'[name].bundle.js'</span> <span class=\"hljs-comment\">//[name]がentry名に置き換えられるのでこの場合index.bundle.jsになります</span>\n  },\n  <span class=\"hljs-attr\">module</span>: {\n    <span class=\"hljs-attr\">rules</span>: [\n      {\n        <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.(js|jsx)$/</span>,\n        <span class=\"hljs-attr\">exclude</span>: <span class=\"hljs-regexp\">/node_modules/</span>,\n        <span class=\"hljs-attr\">use</span>: {\n          <span class=\"hljs-attr\">loader</span>: <span class=\"hljs-string\">'babel-loader'</span> <span class=\"hljs-comment\">//先ほどインストールしたbabel-loader</span>\n        }\n      }\n    ]\n  },\n  <span class=\"hljs-attr\">resolve</span>: {\n    <span class=\"hljs-attr\">extensions</span>: [<span class=\"hljs-string\">'*'</span>, <span class=\"hljs-string\">'.js'</span>, <span class=\"hljs-string\">'.jsx'</span>] <span class=\"hljs-comment\">//拡張子まで書かなくてもファイルをimportすることができるようになる</span>\n  },\n  <span class=\"hljs-attr\">plugins</span>: [htmlWebpackPlugin]\n}</code></pre><p>メモ</p>\n<blockquote>\n<p>webpack.config.js は cli によって実行された場所をルートとしてみることに注意\n__dirname はそのファイルがおかれているディレクトリまでのパスを取得できる\npath.resolve は引数で指定したファイルの絶対パスを返す</p>\n</blockquote>\n<h3>React を書いていく</h3>\n<h4>▶ まずベースとなる html</h4>\n<pre><code class=\"hljs\">&lt;!DOCTYPE html&gt;\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">\"ja\"</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">\"UTF-8\"</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"viewport\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>tanabata-blog<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">section</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"app\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">section</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span></span></code></pre><h4>▶ jsx ファイル</h4>\n<pre><code class=\"hljs\"><span class=\"hljs-keyword\">import</span> React <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react'</span>\n<span class=\"hljs-keyword\">import</span> ReactDOM <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react-dom'</span>\n\n<span class=\"hljs-keyword\">const</span> Index = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>Hello,world.<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n  )\n}\nReactDOM.render(<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Index</span> /&gt;</span></span>, <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">'app'</span>))</code></pre><h3>package.json を編集して実行準備</h3>\n<p>scripts に webpack コマンドを設定</p>\n<p>babel の preset を設定</p>\n<pre><code class=\"hljs\">----略\n\"scripts\": {\n    \"client\": \"webpack-dev-server --config ./client/config/webpack.config.js --open --mode development\",\n    \"build\": \"webpack --config ./client/config/webpack.config.js --mode development\"\n },\n \"babel\": {\n    \"presets\": [\n      \"babel-preset-env\",\n      \"babel-preset-react\"\n    ]\n  },\n----略</code></pre><h3>実行してみる</h3>\n<p>localhost:8080 で dev サーバーが立ち上がる</p>\n<pre><code class=\"hljs\">npm run client</code></pre><p>./client/dist/にバンドルされ js ファイルとそれを読み込む html が出力される</p>\n<pre><code class=\"hljs\">npm run build</code></pre>",
  "preview": "Express と React で WEB アプリケーション構築してみよう\n最終的なディレクトリ構成\n`\n./app\n|----client/\n     |----config",
  "dir": "blogs/jsons",
  "base": "ExpressとReactでWEBアプリケーション構築してみよう.json",
  "ext": ".json",
  "sourceBase": "ExpressとReactでWEBアプリケーション構築してみよう.md",
  "sourceExt": ".md"
}